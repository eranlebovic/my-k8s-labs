apiVersion: v1
kind: ConfigMap
metadata:
  name: webapp-html
data:
  index.html: |
    <!DOCTYPE html>
    <html>
    <head>
      <title>Eran's DevOps Party</title>
      <style>
        @keyframes rainbow {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        body {
          margin: 0;
          height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
          background-size: 400% 400%;
          animation: rainbow 10s ease infinite;
          color: white;
          text-align: center;
        }
        .container {
          background: rgba(0, 0, 0, 0.7);
          padding: 60px;
          border-radius: 30px;
          border: 8px solid gold;
          box-shadow: 0 0 70px gold;
        }
        h1 { font-size: 4.5em; margin: 0; text-shadow: 4px 4px #ff0000; letter-spacing: 2px; }
        .subtitle { font-size: 1.8em; margin-top: 20px; color: #00fff2; font-weight: bold; }
        .footer { font-size: 1.2em; margin-top: 30px; opacity: 0.8; }
        .decor { font-size: 3em; margin-bottom: 10px; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="decor">*** PARTY MODE ***</div>
        <h1>WELCOME TO ERAN'S LAB!</h1>
        <div class="subtitle">DEVOPS ENGINEER | 9950X POWERED</div>
        <div class="footer">STABLE & SYNCED</div>
        <div class="decor">*******************</div>
      </div>
    </body>
    </html>
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: webapp
spec:
  replicas: 17
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:latest
        ports:
        - containerPort: 80
        volumeMounts:
        - name: html-volume
          mountPath: /usr/share/nginx/html
      volumes:
      - name: html-volume
        configMap:
          name: webapp-html
---
apiVersion: v1
kind: Service
metadata:
  name: webapp
spec:
  selector:
    app: nginx
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
  type: ClusterIP
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: webapp-ingress
  annotations:
    kubernetes.io/ingress.class: nginx
spec:
  rules:
  - host: webapp.local
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: webapp
            port:
              number: 80
